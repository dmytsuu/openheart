<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="proposedTreatments">Patient Treatment Selection</title>
    <link rel="stylesheet" href="language-switcher.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
            box-sizing: border-box;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        header {
            margin-bottom: 30px;
            width: 100%;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #ddd;
        }
        .section {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            width: 100%;
        }
        .page-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Button styles */
        .btn {
            padding: 10px 16px;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background-color: #2c3e50;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1a252f;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        /* Medication step styles */
        .medication-card {
            background-color: white;
            border-radius: 8px;
            margin-bottom: 20px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .medication-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .medication-name {
            font-weight: 600;
            font-size: 1.2rem;
            color: #2c3e50;
            flex: 1;
        }
        
        .medication-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .medication-meta-item {
            background-color: #f5f7fa;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .medication-cost {
            color: #16a085;
        }
        
        .medication-stock {
            color: #d35400;
        }
        
        .medication-form-group {
            margin-bottom: 15px;
        }
        
        .medication-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .medication-select, .medication-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .medication-checkbox {
            margin-right: 10px;
            transform: scale(1.2);
        }
        
        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <header>
            <h1 data-i18n="proposedTreatments">ðŸ’Š Proposed Treatments</h1>
            <p><span data-i18n="patientId">Patient ID</span>: <strong id="patientId">PAT-1234</strong> | <span data-i18n="patientName">Name</span>: <strong id="patientName">John Doe</strong> | <span data-i18n="patientAge">Age</span>: <strong id="patientAge">65</strong></p>
            <p><span data-i18n="selectedDiagnosis">Selected Diagnosis</span>: <strong id="selectedDiagnosis">-</strong></p>
        </header>
        
        <div class="section">
            <h2 data-i18n="selectMedications">Select Medications and Treatment</h2>
            <p data-i18n="basedOnDiagnosis">Based on the selected diagnosis, these medications and treatments are recommended:</p>
            
            <form id="medicationForm">
                <!-- Medication 1 -->
                <div class="medication-card">
                    <div class="medication-header">
                        <label class="medication-name">
                            <input type="checkbox" class="medication-checkbox" name="medications" value="Lidocaine">
                            <span data-i18n="lidocaine">Lidocaine</span>
                        </label>
                    </div>
                    
                    <div class="medication-meta">
                        <div class="medication-meta-item medication-cost"><span data-i18n="approxCost">Approx. Cost</span>: $120</div>
                        <div class="medication-meta-item medication-stock"><span data-i18n="stock">Stock</span>: 24 <span data-i18n="units">units</span></div>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="deliveryMethod">Delivery Method:</label>
                        <select class="medication-select" name="lidocaine-delivery">
                            <option value="tube" data-i18n="automatedTube">Automated Tube Delivery</option>
                            <option value="nurse" data-i18n="byNurse">By Nurse</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="targetRoom">Target Operation Room:</label>
                        <select class="medication-select" name="lidocaine-room">
                            <option value="OR1" data-i18n="operationRoom1">Operation Room 1</option>
                            <option value="OR2" data-i18n="operationRoom2">Operation Room 2</option>
                            <option value="OR3" data-i18n="operationRoom3">Operation Room 3</option>
                            <option value="ICU" data-i18n="icu">Intensive Care Unit</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="extraInstructions">Extra Instructions:</label>
                        <textarea class="medication-input" name="lidocaine-instructions" rows="2" placeholder="Enter specific dosage or administration notes" data-i18n="instructionsPlaceholder"></textarea>
                    </div>
                </div>
                
                <!-- Medication 2 -->
                <div class="medication-card">
                    <div class="medication-header">
                        <label class="medication-name">
                            <input type="checkbox" class="medication-checkbox" name="medications" value="Beta-blockers">
                            <span data-i18n="betaBlockers">Beta-blockers (Metoprolol)</span>
                        </label>
                    </div>
                    
                    <div class="medication-meta">
                        <div class="medication-meta-item medication-cost"><span data-i18n="approxCost">Approx. Cost</span>: $85</div>
                        <div class="medication-meta-item medication-stock"><span data-i18n="stock">Stock</span>: 38 <span data-i18n="units">units</span></div>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="deliveryMethod">Delivery Method:</label>
                        <select class="medication-select" name="betablockers-delivery">
                            <option value="tube" data-i18n="automatedTube">Automated Tube Delivery</option>
                            <option value="nurse" data-i18n="byNurse">By Nurse</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="targetRoom">Target Operation Room:</label>
                        <select class="medication-select" name="betablockers-room">
                            <option value="OR1" data-i18n="operationRoom1">Operation Room 1</option>
                            <option value="OR2" data-i18n="operationRoom2">Operation Room 2</option>
                            <option value="OR3" data-i18n="operationRoom3">Operation Room 3</option>
                            <option value="ICU" data-i18n="icu">Intensive Care Unit</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="extraInstructions">Extra Instructions:</label>
                        <textarea class="medication-input" name="betablockers-instructions" rows="2" placeholder="Enter specific dosage or administration notes" data-i18n="instructionsPlaceholder"></textarea>
                    </div>
                </div>
                
                <!-- Medication 3 -->
                <div class="medication-card">
                    <div class="medication-header">
                        <label class="medication-name">
                            <input type="checkbox" class="medication-checkbox" name="medications" value="Defibrillation kit">
                            <span data-i18n="defibrillationKit">Defibrillation Kit</span>
                        </label>
                    </div>
                    
                    <div class="medication-meta">
                        <div class="medication-meta-item medication-cost"><span data-i18n="approxCost">Approx. Cost</span>: $350</div>
                        <div class="medication-meta-item medication-stock"><span data-i18n="stock">Stock</span>: 12 <span data-i18n="units">units</span></div>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="deliveryMethod">Delivery Method:</label>
                        <select class="medication-select" name="defib-delivery">
                            <option value="tube" data-i18n="automatedTube">Automated Tube Delivery</option>
                            <option value="nurse" data-i18n="byNurse">By Nurse</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="targetRoom">Target Operation Room:</label>
                        <select class="medication-select" name="defib-room">
                            <option value="OR1" data-i18n="operationRoom1">Operation Room 1</option>
                            <option value="OR2" data-i18n="operationRoom2">Operation Room 2</option>
                            <option value="OR3" data-i18n="operationRoom3">Operation Room 3</option>
                            <option value="ICU" data-i18n="icu">Intensive Care Unit</option>
                        </select>
                    </div>
                    
                    <div class="medication-form-group">
                        <label class="medication-label" data-i18n="extraInstructions">Extra Instructions:</label>
                        <textarea class="medication-input" name="defib-instructions" rows="2" placeholder="Enter specific dosage or administration notes" data-i18n="instructionsPlaceholder"></textarea>
                    </div>
                </div>
            </form>
            
            <div class="nav-buttons">
                <a href="diagnosis.html" class="btn btn-secondary" data-i18n="back">Back</a>
                <button id="confirmMedications" class="btn btn-primary" data-i18n="confirmAndProceed">Confirm and Proceed to Authorization</button>
            </div>
        </div>
    </div>

    <script src="translations.js"></script>
    <script>
        // Handle medication confirmation and redirect to authorization page
        document.getElementById('confirmMedications').addEventListener('click', function() {
            // Get selected medications
            const selectedMedications = document.querySelectorAll('input[name="medications"]:checked');
            
            if (selectedMedications.length === 0) {
                alert(getTranslation('atLeastOneMedication'));
                return;
            }
            
            // Collect all medication data
            const medicationsData = [];
            selectedMedications.forEach(checkbox => {
                const medicationCard = checkbox.closest('.medication-card');
                const medicationName = checkbox.value;
                
                // Get delivery method and room
                const deliveryMethod = medicationCard.querySelector('select[name$="-delivery"]').value;
                const room = medicationCard.querySelector('select[name$="-room"]').value;
                const instructions = medicationCard.querySelector('textarea[name$="-instructions"]').value;
                
                // Add to medications data
                medicationsData.push({
                    name: medicationName,
                    delivery: deliveryMethod,
                    room: room,
                    instructions: instructions
                });
            });
            
            // Store the selected medications in localStorage
            localStorage.setItem('selectedMedications', JSON.stringify(medicationsData));
            
            // Navigate to the authorization page
            window.location.href = 'authorization.html';
        });

        // Load patient and diagnosis info from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const diagnosis = localStorage.getItem('selectedDiagnosis');
            if (diagnosis) {
                document.getElementById('selectedDiagnosis').textContent = diagnosis;
            } else {
                // If no diagnosis is found, redirect back to diagnosis page
                alert(getTranslation('diagnosisRequired'));
                window.location.href = 'diagnosis.html';
                return;
            }
            
            const patientId = localStorage.getItem('patientId');
            const patientName = localStorage.getItem('patientName');
            const patientAge = localStorage.getItem('patientAge');
            
            if (patientId) document.getElementById('patientId').textContent = patientId;
            if (patientName) document.getElementById('patientName').textContent = patientName;
            if (patientAge) document.getElementById('patientAge').textContent = patientAge;
        });
    </script>
</body>
</html> 
